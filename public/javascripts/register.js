"use strict";!function(){function t(t){if(!validator.isLength(t,{min:a,max:o}))throw new Error("Username must be between "+a+" and "+o+" letters long.");if(!validator.isAlphanumeric(t))throw new Error("Username can consist of letters and digits only.")}function e(t){if(!validator.isLength(t,{min:i,max:s}))throw new Error("Password must be between "+i+" and "+s+" characters long.")}function r(t){if(!validator.isLength(t,{min:a,max:o}))throw new Error("Name must be between "+a+" and "+o+" letters long.");if(!validator.isAlpha(t))throw new Error("Name must consist of letters only.")}toastr.options.preventDuplicates=!0;var n=userConstants,a=n.MIN_NAME_LENGTH,o=n.MAX_NAME_LENGTH,i=n.MIN_PASS_LENGTH,s=n.MAX_PASS_LENGTH,c=$("#register-form"),l=c.find("#tb-username"),u=c.find("#tb-password"),m=c.find("#tb-first-name"),f=c.find("#tb-last-name"),d=c.find("#tb-country"),w=c.find("#tb-profile-img"),v=c.find("#btn-register");$(document).on("keydown",function(t){var e=13,r=t.keyCode||t.which;r===e&&v.trigger("click")}),v.on("click",function(){var n=u.val();return Promise.resolve().then(function(){var a={username:validator.escape(l.val()),password:CryptoJS.SHA256(n).toString(),firstName:validator.escape(m.val()),lastName:validator.escape(f.val()),image:w.val(),country:d.find(":selected").text()};if(t(a.username),e(n),r(a.firstName),r(a.lastName),a.image&&!validator.isURL(a.image))throw new Error("Invalid image URL.");if("Country"===a.country)throw new Error("You must select a country.");return a}).then(function(t){return requester.putJSON("/account/register",t).then(function(t){window.location=t.redirectUrl}).catch(function(t){toastr.error(t.message)})}).catch(function(t){toastr.error(t.message)})})}();