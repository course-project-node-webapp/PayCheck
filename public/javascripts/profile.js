"use strict";!function(){function e(e){var t=e.closest("a.btn-summary-edit"),a=t.next("span"),r=a.text(),s=$('<textarea class="summary-input form-control animated fadeIn">'+r+"</textarea>").css({width:"100%",height:"10em","margin-top":"2vh",padding:"10px",resize:"none",border:"1px solid #ccc"});t.replaceWith(m),a.replaceWith(s)}function t(e){var t=e.closest("a.btn-save-summary"),a=$("textarea.summary-input");return Promise.resolve().then(function(){var e=a.val()&&a.val().trim();return e=validator.escape(e),requester.putJSON("/account/update/summary",{summary:e}),e}).then(function(e){a.replaceWith("<span>"+e+"</span>"),t.replaceWith(p)}).catch(function(e){toastr.error(e.message)})}function a(){var e=$(".profile-header-top h3 small"),t=e.text(),a=$('<input class="specialty-input form-control animated fadeIn"/>').val(t).css({width:"12em"});e.replaceWith(a)}function r(){var e=$(".profile-header-top h3 input.specialty-input");return Promise.resolve().then(function(){var t=e.val()&&e.val().trim();return t=validator.escape(t),requester.putJSON("account/update/specialty",{specialty:t}),t}).then(function(t){e.replaceWith('<small class="specialty capitalize">'+t+"</small>")}).catch(function(e){toastr.error(e.message)})}function s(e){if("string"!=typeof e)throw new Error("Value must be a string.");var t=e.length;if(!(n<=t&&t<=i))throw new Error("Invalid value length.");if(!/[A-z]/.test(e))throw new Error("Only latin letters are allowed.")}toastr.options.preventDuplicates=!0;var n=3,i=20,l=$("a.edit-profile-btn"),o=$("a.save-changes-btn"),c=$('<i class="material-icons">save</i>').css({"background-color":"#4CAF50"}),u=$("div.overview"),d=$("a.btn-summary-edit"),p=d[0].outerHTML.replace(/hide\b/gi,""),m=$('<a class="btn-save-circle btn-edit btn-save-summary edit-mode">').append(c),h=$("ul.skills>li.add"),v=$("a.add-skill-btn"),f=$("a.btn-delete"),k=$('<a class="btn btn-success submit-skill-btn">Add</a>'),y=$('<input class="form-control skill-input" type="text" placeholder="Enter your skill"/>'),b=$('<div class="add-skill-input-container hide"/>').append(y).append(k);h.append(b),v.on("click",function(){v.addClass("hide"),b.removeClass("hide")}),k.on("click",function(){return Promise.resolve().then(function(){var e=$("ul.skills").children("li.skill");if(e.length>=10)throw new Error("You cannot have more than 10 skills.");var t=y.val();s(t);var a=e.children("span.skill-name"),r=[].slice.call(a).some(function(e){return e.innerHTML.toLowerCase()===t.toLowerCase()});if(r)throw new Error("Skill already exists.");return t=validator.escape(t),requester.putJSON("/account/update/skills/add",{skill:t})}).then(function(){b.addClass("hide"),y.val(""),v.removeClass("hide"),window.location.reload(!1)}).catch(function(e){toastr.error(e.message)})}),f.on("click",function(){var e=$(this),t=e.nextAll("span.skill-name").text();return Promise.resolve().then(function(){return t=validator.escape(t),requester.putJSON("/account/update/skills/remove",{skill:t})}).then(function(){e.parent("li.skill").addClass("animated zoomOut"),setTimeout(function(){e.parent("li.skill").remove()},400)}).catch(function(e){toastr.error(e.message)})}),l.on("click",function(){var e=$(".edit-mode");$(this).addClass("hide"),o.removeClass("hide"),e.removeClass("hide"),a()}),o.on("click",function(){u.trigger("click");var e=$("textarea.summary-input"),t=$("a.btn-save-summary"),a=e.val()&&e.val().trim();e.replaceWith("<span>"+a+"</span>"),t.replaceWith(p);var s=$(".edit-mode");s.addClass("hide"),$(this).addClass("hide"),l.removeClass("hide"),r()}),u.on("click",function(a){var r=$(a.target);return r.hasClass("btn-summary-edit")||r.parent().hasClass("btn-summary-edit")?e(r):r.hasClass("btn-save-summary")||r.parent().hasClass("btn-save-summary")?t(r):null})}();