"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){function e(e){return e<10&&(e="0"+e),e}var t=$(".chat-status span"),a=$(".chat-textarea"),s=$("ul.messages"),n=$(".full-name"),o=$("ul.users"),l=t.text(),r=function e(a){t.text(a),a!==l&&!function(){var t=setTimeout(function(){e(l),clearInterval(t)},3e3)}()},c=io.connect();c.emit("new-user",n.text()),c.on("output",function(t){if(t.length)for(var a=0;a<t.length;a++){var n=$("<li/>",{class:"chat-message"}),o=new Date(t[a].dateCreated),l=e(o.getHours()),r=e(o.getMinutes()),c=e(o.getSeconds());o=l+":"+r+":"+c;var i=$('<span class="message-time">['+o+"]</span>"),u=$('<span class="message-author capitalize">'+t[a].name+"</span>"),p=$('<span class="message">'+validator.blacklist(t[a].message,"<>")+"</span>");n.append(i).append(u).append(p),s.append(n),$(".chat-messages").scrollTop($(".chat-messages")[0].scrollHeight)}}),c.on("status",function(e){r("object"===("undefined"==typeof e?"undefined":_typeof(e))?e.message:e),e.clear===!0&&a.val("")}),c.on("online-users",function(e){for(var t=void 0,a=$("<li/>",{class:"online-users"}),s=e.length,n=0;n<s;n++)t=$("<a href='/users/'>"+e[n]+"</a>"),a.append(t);o.append(a)}),a.on("keydown",function(e){var t=this,a=n.text();13===e.which&&e.shiftKey===!1&&(c.emit("input",{name:a,message:validator.blacklist(t.value,"<>"),dateCreated:Date.now()}),$(".chat-messages").scrollTop($(".chat-messages")[0].scrollHeight),e.preventDefault())})}();