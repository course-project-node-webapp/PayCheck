"use strict";!function(){function n(){return new Promise(function(n){var t=validator.escape(d.val()),o=validator.escape(f.val());r(t),e(o);var i={username:t,password:CryptoJS.SHA256(o).toString()};return n(i)})}function t(n,t){return requester.postJSON("/account/login",t).then(function(n){toastr.success(n.message),setTimeout(function(){window.location=n.redirectUrl},1500)}).catch(function(){toastr.error("Invalid username or password.")})}function r(n){if(!validator.isLength(n,{min:i,max:a}))throw new Error("Username must be between "+i+" and "+a+" letters long.");if(!validator.isAlphanumeric(n))throw new Error("Username can consist of letters and digits only.")}function e(n){if(!validator.isLength(n,{min:s,max:c}))throw new Error("Password must be between "+s+" and "+c+" characters long.")}toastr.options.preventDuplicates=!0;var o=userConstants,i=o.MIN_NAME_LENGTH,a=o.MAX_NAME_LENGTH,s=o.MIN_PASS_LENGTH,c=o.MAX_PASS_LENGTH,u=$("#login-form"),d=u.find("#username-tb"),f=u.find("#password-tb"),l=u.find("#btn-submit");$(document).on("keydown",function(n){var t=13,r=n.keyCode||n.which;r===t&&l.trigger("click")}),l.on("click",function(){return n().then(function(n){return t("POST",n)}).catch(function(n){toastr.error(n.message)})})}();